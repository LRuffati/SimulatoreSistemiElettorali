metaclasses:
        - Elector
        - totals # per le funzioni di supporto
        - PolEnt # The name is unique amongst all polents
        - External # Accepts external data
        - Filter # Provides a filter interface
        - Logger # Accumulates
external:
        coalizione:
                init: True
                default: # None

totals_support:
        elettore:
                commons: elettore # commons diventa la funzione commons.elettore

elector:
        plurinominale:
                commons: eleggi_pluri_lista

filter:
        Eletto:
                type: predicate
                source:
                        hub:
                                type: get_fun
                                class: Nazione
                                fun: totals
                        args:
                                - lista
                data_type: dataframe
                column_key: Lista
                column_val: Voti
                logic: relative
                criteria: gt
                target: 0.03

        ElettoSolo:
                type: and
                predicates:
                        - filter: Eletto # filter: stringa controlla implicitamente su self
                        - type: not
                          predicate:
                                  filter: ElettoCoalizione

        ElettoCoalizione:
                type: and
                predicates:
                        - filter: Eletto 
                        - type: not
                          predicate:
                                type: predicate
                                source:
                                          type: var
                                          name: self.coalizione
                                logic: result
                                criteria: eq
                                target: # None
                        - filter:
                                name: Eletta # Controlla il filtro Eletta sulla coalizione
                                target: # Su che oggetto chiamare il filtro
                                        source: 
                                                hub:
                                                        type: get_instance # restituisce l'istanza
                                                args:
                                                        - PolEnt # Nome classe
                                                        - source: # istanza
                                                                type: var
                                                                name: self.coalizione
        Partecipa:
                type: predicate
                source:
                        hub:
                                type: get_fun
                                class: Nazione
                                fun: totals
                                args:
                                        -lista
                data_type: dataframe
                column_key: Lista
                column_val: Voti
                logic: relative
                criteria: gt
                target: 0.01

